# -*- mode: ruby -*-
# vi: set ft=ruby :

# generated by https://github.com/timveil/hdp-vagrant-generator on 28/09/17 13:49

require 'ffi'

Vagrant.configure("2") do |config|
    config.vm.box = "centos6-hdp-base"
    config.vm.box_check_update = true

    config.vm.define "default.hdp.local"	
    config.vm.network "private_network", ip: '192.168.7.102', hostsupdater: "skip"
    config.vm.provider "virtualbox" do |v|
        v.memory = 16384
        v.cpus = 4
        v.name = 'default.hdp.local'
    end

    config.vbguest.auto_update = true
    config.vbguest.no_remote = true
    config.vbguest.no_install = false

    # provision VM
    config.vm.provision "file", source: "hosts", destination: "/tmp/install/hosts"
    config.vm.provision "file", source: "blueprint.json", destination: "/tmp/install/blueprint.json"
    config.vm.provision "file", source: "create-cluster.json", destination: "/tmp/install/create-cluster.json"
    config.vm.provision "file", source: "create-hdp-repo.json", destination: "/tmp/install/create-hdp-repo.json"
    config.vm.provision "file", source: "create-hdp-utils-repo.json", destination: "/tmp/install/create-hdp-utils-repo.json"
    config.vm.provision "Install", type: "shell", path: "install.sh"
    config.vm.provision "Post Install", type: "shell", path: "post-install.sh"
    config.vm.provision "Ambari Details", type: "shell", inline: "echo 'Ambari URL is http://default.hdp.local:8080 or http://default:8080 or http://192.168.7.102:8080'", run: "always"
	
    if Vagrant.has_plugin?("vagrant-proxyconf")
      config.proxy.http     = ""
      config.proxy.https    = ""
      config.proxy.no_proxy = ""
    end	
end
